### 计算机网络概述

计算机网络就是互连的、自治的计算机集合。自治-无主从关系；互连-互联互通。计算机网络一般不能够直接连接，不然线路太多了，要使用交换网络互连主机。交换节点：路由器或交换机，用来实现数据中继。

Internet：全球最大的互联网络，由ISP（Internet Service Provider）网络互连的“网络之网络”。Internet是数以百万计的互连的计算设备的集合。主机就是端系统，它们通过通信链路互连，使用分组交换。

Internet是为网络应用提供通信服务的基础设施，为网络应用提供应用编程接口。仅由硬件连接，Internet不能顺畅运行，要有网络协议。什么是网络协议？任何通信或信息的交换过程都需要规则，网络通信的主体是机器。

网络协议（network protocol），是为进行网络中的数据交换而建立的规则、标准或约定。协议规定了通信实体之间所交换的信息的格式、意义、顺序以及针对收到信息或发生的时间所采取的“动作”。

协议的三要素：

- 语法（Syntax）：数据与控制信息的结构或格式，底层的语法可能是信号电平。
- 语义（Semantics）：需要发出何种控制信息、完成何种动作以及做出何种响应、差错控制。
- 时序（Timing）：事件顺序、速度匹配。

协议规范了网络中所有信息的发送和接收过程。Internet协议标准：RFC（Request for Comments）。



### 计算机网络结构

- 网络边缘：主机、网络应用
- 接入网络、物理介质：有线或无线通信链路
- 网络核心（核心网络）：互连的路由器或分组转发设备、网络的网络

网络边缘：

- 主机（端系统）：位于网络边缘，运行网络应用程序
- 客户/服务器应用模型：客户发送请求，接收服务器响应，比如Web应用、文件传输FTP应用
- 对等应用模型（P2P）：无专用服务器，通信在对等的实体之间直接进行

接入网络：

- 如何将网络边缘接入核心网络？
- 住宅接入网络、机构接入网络、移动接入网络
- 用户关心：带宽（bandwidth，数据传输速率，单位bps），共享/独占？
- 举例：数字用户线路、电缆网络（频分多路复用）、无线接入网络（无线局域网LANs，广域无线接入）

网络核心：

- 互连的路由器网络
- 网络核心的关键功能：路由+转发
- 网络核心解决的基本问题：如何实现数据从源主机通过网络核心送达目的主机

Internet结构：

端系统通过接入ISP（access ISPs）连接到Internet，比如家庭公司或大学ISPs。接入ISP必须进一步互连，这样任意两个主机才可以相互发送分组。

![Internet结构示意图](http://book.moecode.com/net-overview/1.png)



### 电路交换与多路复用

数据交换三类：电路交换、报文交换、分组交换。

最典型的电路交换网络：电话网络。电路交换三个阶段：建立连接、通信、释放资源。电路交换的特点：**独占资源**。电路交换网络如何共享中继线？多路复用。

多路复用（multiplexing）：链路/网络资源划分为“资源片”，将资源片分配给各路“呼叫”，各路呼叫独占分配到的资源进行通信，资源片可能闲置。典型多路复用方法：频分多路复用（frequency division multiplexing, FDM），时分多路复用TDM，波分多路复用WDM，码分多路复用CDM。

频分多路复用的各个用户占用不同的带宽资源（注意这里的带宽是频律带宽而不是发送速率），用户在分配到一定的频带后在通信过程中自始至终都占用这个频带。

时分多路复用将时间划分为一段段等长的时分复用帧（TDM帧），每个用户在每个TDM帧中占用固定序号的时隙，每个用户所占用的时隙是周期性出现的，其周期就是TDM帧的长度。时分复用的所有用户是在不同时间占用相同的频带宽度。

波分复用就是光的频分复用WDM。光纤上使用不同波长的光。

码分多路复用CDM广泛应用于无线链路共享，每个用户分配一个唯一的m bit码片序列，其中0用-1表示，1用+1表示。各用户使用相同频率载波，利用各自码片序列编码数据。编码信号=原始数据 * 码片序列。要求各用户码片序列相互正交。详见MOOC。



### 报文交换与分组交换

报文：应用发送信息整体，比如一个文件。

分组：报文拆分出来的一系列相对较小的数据包。分组交换需要报文的拆分与重组，会产生额外开销。分组交换使用统计多路复用，按序分配带宽。存储-转发过程。

报文交换与分组交换均采用存储-转发交换方式，区别在于报文交换以完整的报文进行存储-转发，而分组交换以较小的分组进行存储转发。

报文交换与分组交换哪种更好呢？

![传输延时](http://book.moecode.com/net-overview/2.png)

![二者比较](http://book.moecode.com/net-overview/3.png)

![报文交换](http://book.moecode.com/net-overview/4.png)

![分组交换](http://book.moecode.com/net-overview/5.png)

![分组交换的报文交付时间](http://book.moecode.com/net-overview/6.png)

![例题](http://book.moecode.com/net-overview/7.png)

![例题答案](http://book.moecode.com/net-overview/8.png)

分组交换与电路交换哪个更好呢？

![二者比较](http://book.moecode.com/net-overview/9.png)

![分组绝对最优吗](http://book.moecode.com/net-overview/10.png)



### 计算机网络性能

速率：数据率或数据传输速率或比特率。单位时间传输信息量，是计算机网络中最重要的一个性能指标。单位：b/s(bps), kb/s, Mb/s, Gb/s。注意k=10^3, M=10^6, G=10^9，和组成原理中的要区别开来。速率往往是指额定速率或标称速率。

带宽：原本指信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹。网络中的“带宽”通常是数字信道所能传送的“最高数据率”，单位是bps。

延迟/时延。分组交换时为什么会发生丢包和时延？分组在路由器缓存中排队，如果缓存满了，到达的分组可能被丢弃（丢包）。分组到达速率超出输出链路容量时常会发生。

四种分组延迟：

- d_proc-结点处理延迟：差错检测、确定输出链路、通常<msec毫秒级。
- d_queue-排队延迟：等待输出链路可用、取决于路由器拥塞程度。
- d_trans-传输延迟：L分组长度、R链路带宽，d_trans=L/R。
- d_prop-传播延迟：信号传播时间，d物理链路长度、s信号传播速度（约0.7倍光速）。

一跳的延迟  d_nodal = d_proc + d_queue + d_trans + d_prop

讨论排队延迟如下图所示。定义了流量强度。

![排队延迟](http://book.moecode.com/net-overview/11.png)

时延带宽积 = 传播时延 * 带宽 = d_prop * R (bits)。直观上看就是一段链路上容纳的比特量，所以链路的时延带宽积又称为以比特为单位的链路长度。

分组丢失（丢包）：队列缓存容量有限，分组到达已满队列将被丢弃，丢弃分组可能由前序结点或源重发（也可能不重发）。用丢包率来衡量，丢包率 = 丢包数 / 已发分组总数。

吞吐量/率（throughput）：表示在发送端与接收端之间传送数据速率（b/s）。分为即时吞吐量和平均吞吐量。

![瓶颈链路](http://book.moecode.com/net-overview/12.png)

![Internet场景](http://book.moecode.com/net-overview/13.png)



### 计算机网络体系结构

网络体系结构是从功能上描述计算机网络结构。计算机网络体系结构简称网络体系结构，是分层结构。某层遵循某个/些网络协议完成本层功能。计算机网络体系结构是计算机网络的各层及其协议的集合。体系结构是一个计算机网络的功能层次及其关系的定义。体系结构是抽象的。

为什么采用分层结构？

- 结构清晰，有利于识别复杂系统的部件及其关系。分层的参考模型。
- 模块化的分层易于系统更新、维护。任何一层服务实现的改变对于系统其它层都是透明的。
- 有利于标准化。

分层网络体系结构基本概念如下图所示。

![基本概念](http://book.moecode.com/net-overview/14.png)
